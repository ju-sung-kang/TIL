## 프로그램의 실행단위

cpu core에서 실행하는 처리 단위로 프로세스와 스레드를 포괄하는 개념이다.


<br></br>
## 프로세스란?

프로그램은 컴퓨터에게 특정 명령을 하는 코드파일을 말하고 프로세스는 실행된 프로그램을 의미한다


<br></br>
## 프로세스의 메모리 영역의 구분

![image](https://user-images.githubusercontent.com/77263282/134285155-9c9f5da3-0355-4483-9a90-85b84a723182.png)

(사진 출처 : https://www.crocus.co.kr/1369 )

1) TEXT(CODE) 영역 : 프로그램 코드가 위치하는 곳으로 기계어로 제어됨
2) DATA 영역 : 전역변수, 정적변수, 배열, 구조체 등이 위치하는 곳으로 초기화된 데이터는 DATA 영역에 위치하고 초기화 되지 않은 데이터는 BSS영역에 위치함
3) HEAP 영역 : 동적 메모리 할당을 위한 영역
4) STACK 영역 : 지역변수, 매개변수, return 값 등 잠시 사용되고 사라지는 데이터들을 위한 영역

위 그림과 같이 HEAP 영역은 위에서부터, STACK 영역은 아래에서 부터 채워나가는데, STACK 영역이 위로 올라가다가 HEAP 영역을 침범한 경우를 STACK OVERFLOW 라고 하고, 그 반대는 HEAP OVERFLOW 라고 한다.

메모리 영역을 이렇게 구분해둔 이유는 자원의 효율적 접근과 활용을 위한 것이다.


<br></br>
## 프로그램이 프로세스가 되면서..

디스크에 있던 정보들이 메모리로 올라가서 위의 네가지 영역에 저장되게 된다. 그리고 프로세스의 정보를 담은 PCB 블록이 생성된다.


<br></br>
## PCB 블록

운영체제가 프로세스를 표현하는 자료구조. 프로세스가 생성될 때 같이 생성되고, 프로세스가 종료되면 제거된다.

1) pid (참고 : 1번 프로세스는 모든 프로세스의 부모 프로세스, 2번 프로세스는 모든 스레드의 부모 프로세스이다.)
2) program counter
3) 프로세스의 상태
4) 부모와 자식 프로세스에 대한 포인터
5) 메모리 관리정보
6) CPU 스케줄링 정보

등을 포함한다.

프로세스 스케줄링에 사용된다.


<br></br>
## 스레드란?

프로세스처럼 하나의 실행단위라고 보면 되는데, 프로세스보다 더 세분화된 단위이다.

프로세스에는 CODE DATA HEAP STACK 네가지 영역이 있다.

스레드는 이 네가지 영역 중 CODE DATA HEAP 세가지 영역은 공유하고 STACK 영역만 별도로 가지는 실행단위이다.

![image](https://user-images.githubusercontent.com/77263282/134287036-c70781dd-b47b-417a-91e0-0fdb5208cdeb.png)

(사진 출처 : https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html)

위 그림처럼 하나의 부모 프로세스의 CODE DATA HEAP 영역을 공유하는 여러개의 자식 스레드가 존재할 수 있다.



<br></br>
## context switching 이란?

CPU에서 여러가지 프로세스(혹은 스레드?)를 번갈아 가면서 처리하는 것을 이름. 실행되고 있는 프로세스의 정보를 저장하고, 다음에 실행될 프로세스의 정보를 불러온다.


<br></br>
## 멀티 프로세스 vs 멀티 스레드 vs 멀티 프로그래밍 vs 멀티 태스킹

1) 멀티 프로세싱 : 두개이상의 프로세서가 다수의 task를 협력적으로 처리. 메모리 영역을 개별적으로 가지고 있어서 한 개의 프로세스에서 오류가 나더라도 다른 프로세스에 영향은 없다(안전성). 다만 메모리 영역을 독립적으로 가지기 때문에 context switching 에 더 많은 시간과 작업이 필요하다. 스레드 처럼 메모리 영역을 공유하지 않기 때문에 프로세스간 통신은 IPC로 따로 진행해야 한다(추가적인 에너지 소모).

2) 멀티 스레딩 : 프로세스를 여러개의 스레드로 나누어서 처리하는 것. STACK을 제외한 메모리 영역을 공유하기 때문에 context swithcing 이 가볍다. 하지만 메모리 영역을 공유하기 때문에 하나의 스레드에서 오류가 날 경우 다른 스레드에도 문제가 생길 가능성이 있다.

3) 멀티 프로그래밍 : I/O등의 작업을 할 때, CPU가 놀고 있으면 아까우니까 프로그램을 번갈아 가면서 처리하는 것을 말함. 요즘은 잘 안쓰는 말이다.

4) 멀티 태스킹 : task처리를 번갈아 가면서 한다. task라는 개념은 프로세스에서 더 확장된 개념이라고 보면 되는데 멀티 프로그래밍과의 차이점은 놀고있는 자원이 아까워서 번갈아 한다기 보다는 각각 프로그램의 처리 대기시간 때문이라고 보면된다.
